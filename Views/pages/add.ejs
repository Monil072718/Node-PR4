<%-include('../Partials/header.ejs')%>

<div class="container border rounded my-5">
  <h1 class="text-3xl font-medium px-8 text-gray-700 my-2 text-center">Add Book</h1>
  <form
    id="form"
    class="rounded px-8 pt-6 mb-4"
    action=""
    method="post"
    onsubmit="return handleForm(this)"
  >
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
        Book Title
      </label>
      <input
        class="form-control"
        id="username"
        type="text"
        name="name"
        placeholder="Enter book name"
      />
      <p class="text-danger fw-bold" id="nameError"></p>
    </div>
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
        Author
      </label>
      <input
        class="form-control"
        id="author"
        type="text"
        name="author"
        placeholder="Enter author of book"
      />
      <p class="text-danger fw-bold" id="authorError"></p>
    </div>
    <div class="mb-6">
      <label class="block text-gray-700 text-sm font-bold mb-2" for="booktype">
        Book Type
      </label>
      <select
        class="form-control"
        id="booktype"
        name="booktype"
      >
        <option value="" class="text-gray-800" disabled selected>
          --select book type--
        </option>
        <option value="General" class="text-gray-800">General</option>
        <option value="Sci-Fi" class="text-gray-800">Autobiogarphy</option>

        <option value="Romance" class="text-gray-800">Cook Book</option>
        <option value="History" class="text-gray-800">Young Adult</option>
      </select>
      <p class="text-danger fw-bold" id="booktypeError"></p>
    </div>
    <div class="mb-6 flex gap-5">
      <div class="w-1/3">
        <label
          class="block text-gray-700 text-sm font-bold mb-2"
          for="publishedyear"
        >
          Published Year
        </label>
        <input
          class="form-control"
          id="publishedyear"
          type="number"
          name="pyear"
          placeholder="Enter published year"
        />
        <p class="text-danger fw-bold" id="pyearError"></p>
      </div>
      <div class="w-1/3">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="stock">
          Stock
        </label>
        <input
          class="form-control"
          id="stock"
          type="number"
          name="stock"
          placeholder="Enter total stock"
        />
        <p class="text-danger fw-bold" id="stockError"></p>
      </div>
      <div class="w-1/3">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="price">
          Book Price
        </label>
        <input
          class="form-control"
          id="price"
          type="number"
          name="price"
          placeholder="Enter book price"
        />
        <p class="text-danger fw-bold" id="priceError"></p>
      </div>
    </div>

    <div class="flex items-center justify-between">
      <button
        class="btn btn-warning"
        type="submit"
      >
        Add Book
      </button>
    </div>
  </form>
</div>

<%-include('../Partials/footer.ejs') %>

<script>
  function handleForm(e) {
    let submit = true;
    const nameError = document.getElementById("nameError");
    const authorError = document.getElementById("authorError");
    const booktypeError = document.getElementById("booktypeError");
    const pyearError = document.getElementById("pyearError");
    const stockError = document.getElementById("stockError");
    const priceError = document.getElementById("priceError");

    if (e.name.value.trim() === "") {
      nameError.innerText = "please enter your name";
      submit = false;
    } else {
      nameError.innerText = "";
    }

    if (e.author.value.trim() === "") {
      authorError.innerText = "please enter book author";
      submit = false;
    } else {
      authorError.innerText = "";
    }

    if (e.booktype.value.trim() === "") {
      booktypeError.innerText = "please select book type";
      submit = false;
    } else {
      booktypeError.innerText = "";
    }

    if (e.pyear.value.trim() === "") {
      pyearError.innerText = "please enter published year";
      submit = false;
    } else {
      pyearError.innerText = "";
    }

    if (e.stock.value.trim() === "") {
      stockError.innerText = "please enter total stock  ";
      submit = false;
    } else {
      stockError.innerText = "";
    }

    if (e.price.value.trim() === "") {
      priceError.innerText = "please enter book value";
      submit = false;
    } else {
      priceError.innerText = "";
    }

    return submit;
  }
</script>
